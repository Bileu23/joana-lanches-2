# Delivery Management System - Joana Lanches

## Overview

This is a delivery management application designed for a small food business called "Joana Lanches". The system allows delivery drivers to track their daily deliveries, earnings, and generate reports. It's built as a mobile-first web application with a React frontend and Express backend.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
- **Framework**: React with TypeScript
- **Routing**: Wouter for client-side routing
- **Styling**: Tailwind CSS with shadcn/ui component library
- **State Management**: TanStack Query for server state management
- **Form Handling**: React Hook Form with Zod validation
- **Build Tool**: Vite for development and bundling

### Backend Architecture
- **Framework**: Express.js with TypeScript
- **Database**: PostgreSQL with Drizzle ORM
- **Database Provider**: Neon Database (serverless PostgreSQL)
- **Validation**: Zod schemas shared between client and server
- **Storage**: Currently using in-memory storage with interface for database integration

## Key Components

### Database Schema
The system uses a simple deliveries table with the following structure:
- `id`: Auto-incrementing primary key
- `customerName`: Customer's name (text, required)
- `street`: Delivery street address (text, required)
- `neighborhood`: Delivery neighborhood (text, required)
- `value`: Delivery fee amount (decimal, constrained to 5.00, 6.00, or 7.00)
- `timestamp`: Delivery timestamp (auto-generated)

### API Endpoints
- `GET /api/deliveries`: Fetch all deliveries
- `POST /api/deliveries`: Create new delivery
- `DELETE /api/deliveries`: Clear all deliveries (reset report)

### User Interface Pages
1. **Home**: Dashboard showing delivery count and total earnings
2. **Delivery**: Form to register new deliveries
3. **Map**: Google Maps integration for address lookup and directions
4. **Values**: Display available delivery price tiers
5. **Report**: List all deliveries with summary statistics
6. **WhatsApp**: Send daily reports to company WhatsApp Business

## Data Flow

1. Driver enters delivery information through the delivery form
2. Form data is validated using Zod schemas
3. Data is sent to Express API endpoint
4. Currently stored in memory (can be easily switched to PostgreSQL)
5. TanStack Query manages cache invalidation and UI updates
6. Reports are generated by aggregating delivery data

## External Dependencies

### Core Dependencies
- **Database**: Neon Database (serverless PostgreSQL)
- **UI Components**: Radix UI primitives via shadcn/ui
- **Icons**: Lucide React icons
- **Validation**: Zod for schema validation
- **HTTP Client**: Native fetch API

### Development Tools
- **TypeScript**: Type safety across the stack
- **ESBuild**: Server-side bundling
- **Drizzle Kit**: Database migrations and schema management

## Deployment Strategy

### Production Build
- Frontend: Vite builds optimized React bundle to `dist/public`
- Backend: ESBuild bundles Express server to `dist/index.js`
- Single deployment artifact with static file serving

### Environment Configuration
- `DATABASE_URL`: PostgreSQL connection string (required)
- `NODE_ENV`: Environment mode (development/production)

### Storage Strategy
The application currently uses in-memory storage with a clean interface (`IStorage`) that allows easy switching to persistent database storage. The Drizzle configuration is already set up for PostgreSQL deployment, making the transition seamless when a database is provisioned.

### Mobile-First Design
The application is designed with a mobile-first approach, featuring:
- Responsive design optimized for mobile devices
- Touch-friendly interface elements
- PWA-ready architecture for app-like experience
- Maximum width container for mobile screen optimization

The system architecture supports easy scaling from the current in-memory storage to full database persistence while maintaining the same API interface and user experience.

## Recent Updates (January 2025)

### Date and Time Integration
- **Header Enhancement**: Added real-time date/time display in the header, updating every second
- **Report Improvements**: Enhanced delivery timestamps to show full date and time (DD/MM/YYYY Ã s HH:MM)
- **Daily Report Context**: Added current date display in report header showing full weekday and date
- **Portuguese Localization**: All date/time formatting uses Brazilian Portuguese locale (pt-BR)

### Technical Implementation
- Implemented `useState` and `useEffect` hooks for real-time clock functionality
- Enhanced timestamp formatting functions for better readability
- Fixed TypeScript compilation errors in delivery timestamp handling
- Maintained mobile-first responsive design across all new features

### Google Maps Integration
- **Map Page**: New dedicated page for address lookup and navigation
- **Google Maps Integration**: Direct integration with Google Maps web service
- **Address Search**: Users can search for any address and open it in Google Maps
- **Navigation Support**: "Como Chegar" button provides turn-by-turn directions from current location
- **Quick Access**: Popular neighborhoods pre-loaded for faster searching
- **Responsive Design**: Mobile-optimized interface with touch-friendly controls
- **Navigation Tab**: Added map icon to bottom navigation for easy access

### WhatsApp Business Integration
- **WhatsApp Reports**: New dedicated page for sending daily reports to company WhatsApp Business
- **Company Integration**: Configured to send to https://wa.me/c/559888150536
- **Report Formats**: Two options - complete detailed report and quick summary
- **Automatic Formatting**: Professional report format with emojis and structured layout
- **Preview Feature**: Users can preview the message before sending
- **Real-time Data**: Reports include current day's deliveries with timestamps and totals
- **Mobile Optimized**: Touch-friendly interface with prominent action buttons

### Custom Background Images (January 2025)
- **Screen-Specific Backgrounds**: Each page now has a unique background image matching its function
- **Home Screen**: Food service kitchen scene with burger preparation
- **WhatsApp Screen**: Green tech-themed pattern with communication icons
- **Report Screen**: Office supplies and notebook background for professional reporting
- **Values Screen**: Brazilian R$100 bills background emphasizing monetary values
- **Map Screen**: Yellow delivery service illustration with phone and delivery person
- **Delivery Screen**: Bright yellow sunburst pattern for positive delivery experience
- **Transparency Optimization**: All backgrounds use 70% white overlay (bg-white/70) for optimal readability
- **Visual Consistency**: Consistent rounded corners (rounded-2xl) and backdrop blur effects across all screens

### Custom Logo Integration (January 2025)
- **Brand Logo**: Updated application to use custom Joana Delivery logo with 3D delivery scene
- **Logo Features**: Phone app interface with delivery person on scooter carrying packages
- **Header Implementation**: Logo integrated in main header with 3D shadow effects
- **Home Screen**: Larger logo display in home page header section
- **Consistent Branding**: Same logo used across all application touchpoints for brand consistency